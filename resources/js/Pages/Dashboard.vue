<script setup lang="ts">
import {Head, router, usePage} from '@inertiajs/vue3';
import NavBar from "@/Components/Layout/NavBar.vue";
import { Link } from '@inertiajs/vue3';
import ziggyRoute from "ziggy-js";
import {computed, ref, watch} from "vue";
import {times} from "@/data";
import {watchDebounced, onClickOutside} from "@vueuse/core";

interface Meal {
    id: number,
    name: string,
    points: number,
    quantity: number,
    consumed_at: string,
    oil_no_count: boolean,
    special_no_count: boolean
}

interface Meals {
    [key: string]: Meal[]
}

interface Guideline {
    id: number,
    water: string,
    fruit: number,
    vegetable: number,
}

const props = defineProps<{
    meals: Meals,
    remainingPoints: number,
    weekRemainingPoints: number,
    pointsByColor: Record<string, number>,
    resultSearch: any[],
    noCountDay: boolean,
    guideline: Guideline,
}>();


const oneDay = 24 * 60 * 60 * 1000;
const dayActive = ref(new Date());

const nextDay = () => {
    dayActive.value = new Date(dayActive.value.getTime() + oneDay);
}

const prevDay = () => {
    dayActive.value = new Date(dayActive.value.getTime() - oneDay);
}

watch(dayActive, () => {
    // Get points of this day
    router.reload({data: {dayActive: dayActive.value.toISOString()}});
})

const getTotalPoints = (array: Meal[]) => array ?  array.reduce((acc, meal) => acc + meal.points, 0) : 0;

const oilNoCountQuantity = computed(() => {
    if(!props.noCountDay) return 0;

    return Object.values(props.meals).reduce((acc, meal) => {
        const mealsOil = meal.filter(m => m.oil_no_count);
        return acc + mealsOil.length
    }, 0)
})

const specialNoCountQuantity = computed(() => {
    if(!props.noCountDay) return 0;

    return Object.values(props.meals).reduce((acc, meal) => {
        const mealsOil = meal.filter(m => m.special_no_count);
        return acc + mealsOil.length
    }, 0)
})

const totalPointsPerMeal = computed(() => {
    const result = {} as Record<string, number>;

    times.forEach((time) => {
        result[time] = getTotalPoints(props.meals[time]) ;
    })

    return result;
})

const search = ref('');

watchDebounced(search, () => {
    router.reload({preserveState:true, only:['resultSearch'] , data: {q: search.value}});
}, {debounce: 500})


const startNoCountDay = () => {
    router.post(ziggyRoute('points.no-count'), {
        date: dayActive.value.toISOString()
    })
}

const openResults = ref(false);

watch(search, () => {
    openResults.value = true;
})
const resultsWrapper = ref();

onClickOutside(resultsWrapper, () => {
    if(!openResults.value) return;
    openResults.value= false
})

const page = usePage();

const user = computed(() => page.props.auth.user);

const updateGuideline = (property) => {
    props.guideline[property] += property === 'sport' ? 30 : 1;
    router.post(ziggyRoute('guidelines.store', {id: props.guideline.id}), {...props.guideline})
}

const deleteMeal = (meal) => {
    router.delete(ziggyRoute('points.destroy', {id: meal.id}))
}

</script>

<template>
    <div>
        <Head title="Dashboard" />

        <NavBar>
            <Link :href="ziggyRoute('calculator', {
                dayActive: dayActive.toISOString()
            })" class="btn btn-ghost flex items-end text-primary -mr-2">
                <div class="flex justify-between items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-1 w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25V13.5zm0 2.25h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25V18zm2.498-6.75h.007v.008h-.007v-.008zm0 2.25h.007v.008h-.007V13.5zm0 2.25h.007v.008h-.007v-.008zm0 2.25h.007v.008h-.007V18zm2.504-6.75h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V13.5zm0 2.25h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V18zm2.498-6.75h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V13.5zM8.25 6h7.5v2.25h-7.5V6zM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 002.25 2.25h10.5a2.25 2.25 0 002.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0012 2.25z" />
                    </svg>
                </div>
            </Link>
        </NavBar>

        <div class="bg-primary flex flex-col items-center w-full p-4 text-primary-content" :class="{
            'bg-primary': !noCountDay,
            'bg-secondary': noCountDay
        }">
            <div class="relative m-2 rounded-md shadow-sm w-full">
                    <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                        </svg>
                    </div>
                    <input v-model="search" type="text" name="text" id="text" class="block w-full rounded-md border-0 py-1.5 pl-10 text-gray-900 ring-1 ring-inset ring-primary placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6" placeholder="Buscar alimento">
                    <div class="absolute w-full bg-primary-content text-neutral " v-show="openResults" ref="resultsWrapper">
                        <Link :href="ziggyRoute('points.show', {food: result.id, dayActive, noCountDay, special: specialNoCountQuantity, oil: oilNoCountQuantity})" v-for="result in resultSearch" :key="result.id" class="hover:bg-primary hover:text-primary-content flex items-center p-1">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mr-2 " :class="{
                                    'bg-blue-500': result.color === 'blue',
                                    'bg-green-500': result.color === 'green',
                                    'bg-yellow-500': result.color === 'yellow',
                                    'bg-red-500': result.color === 'red',
                                    'bg-black': result.color === 'black',
                                }"></div>
                            <div :class="noCountDay && result.no_count ? 'font-bold' : ''">{{result.name}}</div>
                            <div class="ml-4 text-xs text-gray-400" >{{result.points}} puntos / {{result.quantity }} {{result.unit.toLowerCase()}}</div>
                        </Link>
                    </div>
            </div>

                <div class="flex justify-between w-full  py-4" :class="{'items-center': noCountDay}">
                    <template v-if="!noCountDay">
                        <div class="flex flex-col items-center w-1/3">
                            <div class="text-4xl">{{ Math.max(remainingPoints, 0) }}</div>
                            <div class="text-xs">diarios</div>
                            <div class="text-xs">restantes</div>
                        </div>
                    </template>
                    <div v-else class="">DÃ­a de no contar</div>

                    <button v-if="!noCountDay" class="border border-primary-content rounded-md flex flex-col items-center justify-center p-2 w-1/3" @click="startNoCountDay">
                            <svg id="fi_2515150" viewBox="0 0 512 512" class="h-10 w-10 fill-current" xmlns="http://www.w3.org/2000/svg"><g><g><path d="m292.231 159.683c-2.929 2.929-2.929 7.678 0 10.606 1.464 1.464 3.384 2.197 5.303 2.197s3.839-.732 5.303-2.197l8.059-8.059c2.929-2.929 2.929-7.678 0-10.606-2.929-2.929-7.678-2.929-10.606 0z"></path><path d="m283.653 136.694h11.396c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-11.396c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5z"></path><path d="m111.823 119.937c15.354 13.313 34.479 19.901 53.576 19.901 21.088-.001 42.141-8.036 58.027-23.922 30.271-30.271 32.037-79.292 4.021-111.602-2.266-2.613-5.548-4.182-9.006-4.305-3.465-.131-6.843 1.209-9.288 3.654l-22.456 22.456c-2.929 2.929-2.929 7.677 0 10.606 2.929 2.93 7.678 2.929 10.606 0l20.525-20.524c21.078 26.377 19.086 65.012-5.01 89.108-24.097 24.095-62.732 26.087-89.109 5.01l48.593-48.594c2.929-2.929 2.929-7.678 0-10.606-2.929-2.929-7.678-2.929-10.606 0l-50.525 50.525c-2.445 2.445-3.776 5.83-3.653 9.287s1.692 6.739 4.305 9.006z"></path><path d="m184.602 78.53c-2.929 2.929-2.929 7.678 0 10.606l7.188 7.188c1.464 1.464 3.384 2.197 5.303 2.197s3.839-.732 5.303-2.197c2.929-2.929 2.929-7.678 0-10.606l-7.188-7.188c-2.929-2.929-7.678-2.929-10.606 0z"></path><path d="m165.168 85.737c-4.142 0-7.5 3.358-7.5 7.5v10.165c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-10.165c0-4.142-3.358-7.5-7.5-7.5z"></path><path d="m200.747 67.191h10.166c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-10.166c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5z"></path><path d="m442.984 309.982h-15.194c-.288-1.129-.61-2.26-.999-3.397 24.78-5.75 41.336-20.78 41.336-38.541 0-11.874-7.443-22.734-20.385-30.353 22.415-24.392 25.433-58.696 6.345-77.783-3.699-3.699-7.974-6.558-12.633-8.616-.319-12.006-3.651-23.751-9.697-34.081-2.092-3.575-6.687-4.777-10.261-2.684-3.575 2.092-4.776 6.686-2.684 10.261 4.065 6.946 6.577 14.708 7.386 22.721-3.517-.286-7.121-.22-10.764.195-2.72-22.575-21.981-40.131-45.277-40.131-12.903 0-24.559 5.397-32.863 14.038l-7.566-7.566c10.245-10.58 24.574-17.182 40.429-17.182 9.177 0 18.282 2.254 26.33 6.519 3.66 1.939 8.199.545 10.139-3.115s.545-8.199-3.115-10.139c-10.204-5.407-21.737-8.265-33.354-8.265-19.992 0-38.074 8.28-51.034 21.578l-34.6-34.601c-2.428-2.428-5.775-3.77-9.223-3.65-3.451.109-6.743 1.661-9.031 4.258-20.856 23.68-27.173 55.509-19.353 84.157-8.543 2.636-16.194 9.279-21.977 19.1-11.208-10.336-24.813-16.921-38.631-18.639-10.099-1.257-19.529.17-27.594 4.023-11.914-8.946-26.689-14.275-42.701-14.275-39.331 0-71.329 31.998-71.329 71.329 0 25.003 12.942 47.025 32.47 59.762-1.888 3.594-3.18 7.469-3.738 11.563-1.123 8.239.826 16.329 5.087 23.514h-17.126c-4.785 0-9.419 1.989-12.715 5.458-3.319 3.493-5.012 8.059-4.767 12.855 2.041 39.936 15.438 78.205 38.742 110.671 22.828 31.803 53.95 56.481 90.002 71.367 2.68 1.106 5.544 1.667 8.516 1.667h142.051c2.971 0 5.836-.561 8.516-1.667 36.052-14.885 67.174-39.563 90.002-71.367 23.304-32.466 36.701-70.736 38.742-110.671.245-4.796-1.448-9.362-4.767-12.855-3.296-3.469-7.93-5.458-12.715-5.458zm-72.826-187.408c16.225 0 29.535 12.687 30.549 28.66-7.443 2.732-14.724 6.886-21.387 12.405l-31.424-31.424c5.586-5.928 13.495-9.641 22.262-9.641zm-2.973 59.533c.954 2.509 3.176 4.316 5.827 4.74 2.649.421 5.325-.602 7.014-2.688 1.442-1.782 2.95-3.463 4.481-4.995 18.645-18.644 45.102-22.523 58.975-8.65 13.874 13.875 9.994 40.33-8.651 58.975-1.505 1.505-3.16 2.992-4.918 4.419-2.083 1.69-3.104 4.364-2.679 7.012s2.231 4.867 4.738 5.821c13.049 4.965 21.156 13.128 21.156 21.302 0 11.832-16.373 22.749-38.085 25.394-2.498.304-4.677 1.841-5.802 4.092s-1.046 4.916.21 7.097c1.046 1.816 1.904 3.606 2.59 5.356h-2.906l-47.257-47.257 42.563-42.563c2.929-2.929 2.929-7.678 0-10.606-2.929-2.929-7.678-2.929-10.606 0l-42.563 42.563-34.451-34.451c-2.503-2.503-5.956-3.863-9.509-3.75-3.548.121-6.921 1.725-9.256 4.4-6.576 7.535-11.668 15.899-15.317 24.716-2.659-7.428-4.016-14.809-3.902-21.595.093-5.538 1.333-15.454 8.593-19.645 2.09-1.207 4.556-1.803 7.282-1.803 4.363 0 9.391 1.528 14.607 4.524 2.18 1.252 4.841 1.329 7.088.205 2.248-1.124 3.784-3.298 4.091-5.792 2.665-21.655 13.577-37.984 25.381-37.984 8.177-.002 16.341 8.108 21.306 21.163zm19.145 126.284c-.876.572-1.772 1.102-2.685 1.591h-34.46c-3.074-1.646-5.962-3.757-8.551-6.346-12.395-12.395-13.979-31.568-4.755-45.696zm-149.162-37.162c-22.821 0-41.781 16.845-45.102 38.753h-10.793c3.399-27.831 27.161-49.463 55.895-49.463s52.496 21.632 55.895 49.463h-10.793c-3.321-21.909-22.281-38.753-45.102-38.753zm29.834 38.753h-59.667c3.126-13.587 15.311-23.753 29.833-23.753s26.708 10.166 29.834 23.753zm24.21-39.607c1.407-14.444 6.922-28.574 16.661-40.442l17.242 17.242c-13.861 18.628-13.49 44.569 1.109 62.807h-18.064c-1.445-15.053-7.594-28.745-16.948-39.607zm-15.384-189.017 65.035 65.035c-15.505 2.794-28.287 18.441-33.503 40.794-3.07-1.046-6.112-1.727-9.104-2.034-2.348-.24-4.65-.227-6.885.009-5.852-16.86-16.389-28.636-28.927-31.906-7.865-24.041-3.516-51.331 13.384-71.898zm-118.141 95.539c6.466-6.466 15.974-9.288 26.771-7.946 11.494 1.429 22.931 7.323 32.203 16.596 1.535 1.535 3.042 3.215 4.482 4.994 1.688 2.087 4.365 3.109 7.014 2.689 2.65-.423 4.873-2.231 5.827-4.74 4.965-13.055 13.129-21.165 21.306-21.165 8.913 0 17.312 9.314 22.04 23.197-8.49 6.228-13.261 16.971-13.492 30.664-.175 10.428 2.335 21.806 7.156 32.879-10.072-5.448-21.593-8.547-33.826-8.547-.083 0-.165.006-.248.006l-29.587-29.587c-2.929-2.929-7.678-2.929-10.606 0-2.929 2.929-2.929 7.678 0 10.606l21.536 21.536c-23.4 6.441-42.03 24.515-49.218 47.599-12.665-4.838-21.005-12.811-21.005-21.254 0-8.174 8.106-16.337 21.156-21.302 2.506-.954 4.313-3.173 4.738-5.821s-.596-5.321-2.679-7.012c-1.76-1.428-3.415-2.915-4.918-4.419-9.273-9.273-15.167-20.71-16.597-32.204-1.342-10.795 1.48-20.302 7.947-26.769zm-58.67 63.676c-8.202-5.498-13.623-14.835-13.623-25.43 0-16.883 13.736-30.619 30.619-30.619 7.141 0 13.706 2.47 18.918 6.584-.269 1.878-.439 3.795-.496 5.751-7.695.175-15.025 2.489-21.166 7.157-10.703 8.135-15.636 21.835-14.252 36.557zm14.895 26.258c2.367-.427 4.386-1.962 5.429-4.13 1.042-2.167.982-4.704-.162-6.819-8.332-15.406-7-32.196 3.166-39.923 3.876-2.947 8.594-4.292 13.627-4.217 2.676 11.609 8.71 22.83 17.451 32.333-12.941 7.618-20.383 18.479-20.383 30.352 0 15.251 12.216 28.479 31.356 35.556h-66.781c-6.725-5.948-10.405-13.648-9.337-21.488 1.447-10.617 11.509-19.12 25.634-21.664zm-54.228-51.688c0-31.06 25.269-56.329 56.329-56.329 11.003 0 21.273 3.18 29.956 8.658-2.458 2.654-4.543 5.579-6.232 8.739-6.917-4.235-15.036-6.687-23.724-6.687-25.154 0-45.619 20.464-45.619 45.619 0 18.368 10.916 34.229 26.599 41.453-3.835 1.819-7.314 4.032-10.345 6.594-16.161-9.911-26.964-27.74-26.964-48.047zm382.007 141.867h-70.691c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h66.947c-6.081 20.753-15.641 40.42-28.409 58.208-21.193 29.525-50.081 52.434-83.541 66.249-.855.353-1.794.532-2.791.532h-142.051c-.997 0-1.936-.179-2.791-.532-33.46-13.815-62.348-36.724-83.541-66.25-12.768-17.788-22.328-37.455-28.409-58.208h268.586c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-272.33c-2.007-9.666-3.285-19.517-3.794-29.481-.042-.833.335-1.415.66-1.757.281-.295.893-.79 1.841-.79h381.607c.948 0 1.561.495 1.841.79.325.342.703.924.66 1.757-.509 9.965-1.787 19.816-3.794 29.482z"></path><path d="m327.845 74.242c1.091 0 2.196-.144 3.292-.437l49.225-13.189h.001c6.046-1.621 9.985-7.513 9.164-13.705-1.585-11.954-6.938-22.787-15.478-31.327s-19.372-13.892-31.326-15.477c-6.187-.815-12.083 3.118-13.706 9.166l-13.189 49.224c-1.169 4.365.04 8.878 3.235 12.074 2.394 2.393 5.527 3.671 8.782 3.671zm15.08-58.917c7.795 1.47 14.852 5.2 20.518 10.865 5.666 5.666 9.395 12.722 10.865 20.518l-42.87 11.487z"></path></g></g></svg>
                            <span class="text-xs">DÃ­a de no contar</span>

                    </button>
                    <div class="flex flex-col items-center w-1/3">
                        <div class="text-4xl">{{ weekRemainingPoints }}</div>
                        <div class="text-xs">extras</div>
                        <div class="text-xs">semanales</div>
                    </div>
                </div>
            <div class="m-4 flex justify-evenly w-full text-xs" :class="noCountDay ? 'opacity-0' : ''">
                <div class="flex items-center px-1 rounded-full" :class="user.sugars <= pointsByColor['green'] ? 'bg-primary-content text-neutral': 'bg-primary'">
                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                    <div>{{pointsByColor['green'] || 0}} puntos</div>
                </div>
                <div class="flex items-center px-1 rounded-full" :class="user.proteins <= pointsByColor['blue'] ? 'bg-primary-content text-neutral': 'bg-primary'">
                    <div class="w-2 h-2 bg-blue-500 rounded-full mr-2"></div>
                    <div>{{pointsByColor['blue'] || 0}} puntos</div>
                </div>
                <div class="flex items-center px-1 rounded-full" :class="user.fats <= pointsByColor['red'] ? 'bg-primary-content text-neutral': 'bg-primary'">
                    <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
                    <div>{{pointsByColor['red'] || 0}} puntos</div>
                </div>
                <div class="flex items-center">
                    <div class="w-2 h-2 bg-yellow-500 rounded-full mr-2"></div>
                    <div>{{pointsByColor['yellow'] || 0}} puntos</div>
                </div>
            </div>
            <div @click.stop>
                <span class="p-2" @click="prevDay">&lt;</span>
                <span class="p-2">{{dayActive.getDate()}}/{{dayActive.getMonth() + 1}}/{{dayActive.getFullYear()}}</span>
                <span class="p-2" @click="nextDay">&gt;</span>
            </div>
            <div class="m-4 flex justify-evenly w-full text-xl">
                <div class="flex rounded-lg" :class="guideline.water >= 8 ? 'bg-primary-content text-neutral': noCountDay ? 'bg-secondary' : 'bg-primary'" @click="updateGuideline('water')">
                    <span class="p-2 flex flex-col justify-center items-center text-base">
                        <svg id="fi_3248368" class="fill-current h-6 w-6" viewBox="0 0 512 512"  xmlns="http://www.w3.org/2000/svg"><g><g><path d="m362.867 504.5h-213.734c-10.012 0-18.578-7.193-20.309-17.055l-7.594-43.269c-21.977-125.214-33.028-252.101-33.028-379.229v-46.41c0-6.096 4.941-11.037 11.037-11.037h313.522c6.096 0 11.037 4.941 11.037 11.037v46.41c0 127.128-11.051 254.016-33.028 379.23l-7.594 43.269c-1.731 9.861-10.297 17.054-20.309 17.054z" fill="#cceffd"></path></g><g><path d="m138.566 164.79c-4.18 0-7.52 3.498-7.311 7.673 4.452 88.766 14.388 177.432 29.712 264.74l3.972 22.629c.439 2.5 2.611 4.324 5.149 4.324h171.823c2.539 0 4.711-1.824 5.149-4.324l3.971-22.629c15.324-87.308 25.26-175.973 29.712-264.74.209-4.175-3.131-7.673-7.311-7.673z" fill="#75cff9"></path></g><g><path d="m412.761 7.5h-30c6.096 0 11.037 4.941 11.037 11.037v46.41c0 127.128-11.051 254.016-33.028 379.23l-7.594 43.269c-1.731 9.862-10.296 17.055-20.309 17.055h30c10.013 0 18.578-7.193 20.309-17.055l7.594-43.269c21.977-125.214 33.028-252.102 33.028-379.23v-46.41c0-6.096-4.942-11.037-11.037-11.037z" fill="#91dafa"></path></g><g><path d="m373.434 164.79h-30c4.18 0 7.52 3.498 7.311 7.672-4.452 88.767-14.388 177.432-29.712 264.74l-3.971 22.629c-.439 2.5-2.611 4.324-5.149 4.324h30c2.539 0 4.71-1.824 5.149-4.324l3.971-22.629c15.324-87.308 25.26-175.973 29.712-264.74.209-4.174-3.131-7.672-7.311-7.672z" fill="#6cbff8"></path></g><g><path d="m412.761 0h-112.427c-4.143 0-7.5 3.358-7.5 7.5s3.357 7.5 7.5 7.5h112.427c1.95 0 3.537 1.587 3.537 3.537v46.41c0 126.341-11.074 253.497-32.915 377.934l-7.595 43.268c-1.103 6.287-6.538 10.851-12.922 10.851h-213.733c-6.384 0-11.818-4.564-12.921-10.851l-7.594-43.268c-21.842-124.441-32.916-251.595-32.916-377.934v-46.41c0-1.95 1.587-3.537 3.537-3.537h171.095c4.143 0 7.5-3.358 7.5-7.5s-3.357-7.5-7.5-7.5h-171.095c-10.222 0-18.537 8.316-18.537 18.537v46.41c0 127.205 11.15 255.233 33.141 380.526l7.594 43.269c2.366 13.477 14.013 23.258 27.696 23.258h213.733c13.684 0 25.331-9.782 27.695-23.258l7.595-43.269c21.991-125.291 33.142-253.318 33.142-380.526v-46.41c0-10.221-8.315-18.537-18.537-18.537z"></path><path d="m160.899 164.79c0-4.142-3.358-7.5-7.5-7.5h-14.833c-4.041 0-7.956 1.68-10.742 4.609-2.782 2.924-4.261 6.912-4.059 10.939 4.463 88.993 14.495 178.374 29.816 265.661l3.972 22.629c1.071 6.1 6.343 10.527 12.536 10.527h171.823c6.194 0 11.467-4.428 12.536-10.528l3.972-22.629c15.321-87.294 25.353-176.676 29.815-265.661.202-4.028-1.277-8.015-4.06-10.939-2.785-2.928-6.7-4.608-10.741-4.608h-190.035c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h189.844c-4.438 88.3-14.396 176.997-29.598 263.616l-3.643 20.75h-168.006l-3.642-20.749c-15.202-86.612-25.161-175.309-29.598-263.616h14.643c4.142-.001 7.5-3.359 7.5-7.501z"></path></g></g></svg>
                        <span>{{ guideline.water }}</span>
                    </span>
                </div>
                <div class="flex rounded-lg" :class="guideline.fruit >= 2 ? 'bg-primary-content text-neutral':  noCountDay ? 'bg-secondary' : 'bg-primary'" @click="updateGuideline('fruit')">
                    <span class="p-2 flex flex-col justify-center items-center text-base">
<svg class="h-6 w-6" version="1.1" id="fi_415733" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve">
<path style="fill:#F94848;" d="M465.19,285.054c0,61.607-40.062,146.747-88.501,193.258C355.207,498.967,332.069,512,310.042,512
	c-13.922,0-27.808-2.236-39.754-5.843c-16.368-4.954-33.775-4.954-50.143,0C208.2,509.764,194.315,512,180.392,512
	c-23.076,0-47.388-14.318-69.736-36.715c-47.042-47.104-85.412-129.947-85.412-190.232c0-88.945,53.207-142.683,103.238-155.654
	c23.966-6.214,51.774-2.211,74.232,3.632c23.225,6.053,47.363,7.066,70.884,3.039c4.744-0.815,9.45-1.828,14.12-3.039
	c22.459-5.843,50.254-9.846,74.232-3.632C411.984,142.371,465.19,196.109,465.19,285.054z"></path>
<path style="fill:#E23D3D;" d="M376.687,478.307c-59.444,10.504-105.23,7.594-139.729-0.76
	c-56.335-13.641-98.243-61.156-105.227-118.696c-17.493-144.11,76.667-186.066,76.667-186.066
	c27.598,12.539,58.63,5.843,58.63,5.843c-19.803-19.79,6.572-42.558,6.572-42.558c-23.521,4.027-47.66,3.014-70.884-3.039
	c-22.459-5.843-50.266-9.846-74.232-3.632C78.451,142.371,25.245,196.109,25.245,285.054C25.245,373.987,108.742,512,180.392,512
	c13.922,0,27.808-2.236,39.754-5.843c16.368-4.954,33.774-4.954,50.143,0c11.946,3.607,25.831,5.843,39.754,5.843
	c22.026,0,45.164-13.033,66.647-33.688C376.687,478.309,376.69,478.312,376.687,478.307z"></path>
<path style="fill:#C7F492;" d="M486.756,5.506c0,0-12.354,86.116-77.419,111.182c-62.2,23.966-117.643-40.828-140.385-35.726
	c-1.025,0.21-1.977,0.581-2.866,1.112c-0.037,0.012-0.049,0.025-0.049,0.025l0.012-0.049c0.766-2.322,25.708-76.616,89.761-81.484
	C420.874-4.377,456.28,25.272,486.756,5.506z"></path>
<path style="fill:#A3E261;" d="M486.756,5.506c0,0-39.531,48.179-95.122,48.179c-48.883,0-108.909,21.965-122.683,27.277
	c-1.655,0.63-2.631,1.025-2.866,1.112c-0.037,0.012-0.049,0.025-0.049,0.025l0.012-0.049c0.766-2.322,25.708-76.616,89.761-81.484
	C420.874-4.377,456.28,25.272,486.756,5.506z"></path>
<ellipse transform="matrix(-0.0989 -0.9951 0.9951 -0.0989 186.5864 663.8789)" style="fill:#FC8181;" cx="393.878" cy="247.459" rx="44.464" ry="28.771"></ellipse>
<path style="fill:#E23D3D;" d="M291.289,166.437c0,10.118-15.887,18.543-36.974,20.457c-2.94,0.272-5.979,0.408-9.092,0.408
	c-3.249,0-6.411-0.148-9.463-0.432c-20.89-1.989-36.591-10.377-36.591-20.433H291.289z"></path>
<path style="fill:#B25719;" d="M280.368,81.012l-33.787,51.316c2.532,10.402,4.719,21.866,6.14,34.108
	c0.778,6.609,1.334,13.441,1.594,20.457c-2.94,0.272-5.979,0.408-9.092,0.408c-3.249,0-6.411-0.148-9.463-0.432
	c-0.272-7.017-0.877-13.836-1.705-20.433c-6.053-47.969-24.559-83.3-24.781-83.695c-2.397-4.521-0.679-10.13,3.842-12.526
	c4.521-2.409,10.13-0.692,12.526,3.83c0.544,1.038,7.35,14.046,14.219,34.8l25.041-38.024c2.804-4.274,8.561-5.448,12.823-2.631
	C281.999,70.994,283.185,76.738,280.368,81.012z"></path>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
                        <span>{{ guideline.fruit}}</span>
                    </span>
                </div>
                <div class="flex rounded-lg" :class="guideline.vegetable >= 3 ? 'bg-primary-content text-neutral':  noCountDay ? 'bg-secondary' : 'bg-primary'"  @click="updateGuideline('vegetable')">
                    <span class="p-2 flex flex-col justify-center items-center text-base">
<svg class="h-6 w-6" version="1.1" id="fi_765618" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 511.997 511.997" style="enable-background:new 0 0 511.997 511.997;" xml:space="preserve">
<path style="fill:#3BBC56;" d="M457.471,125.786c-3.52-1.514-5.908-4.819-6.232-8.626c-2.667-31.349-28.17-56.624-60.217-58.196
	c-5.033-0.246-9.418-3.676-11.17-8.739c-16.757-48.401-82.723-52.509-106.55-8.927l-0.573,1.048l1.133,0.38
	c22.899,7.673,41.328,28.944,43.326,56.168c42.091,12.677,76.34,37.268,101.373,69.842l1.236,1.608l0.523-1.959
	c3.593-13.459,13.621-36.424,40.403-39.003l3.415-0.373C460.048,126.983,458.907,126.401,457.471,125.786z"></path>
<g>
	<path style="fill:#30AA44;" d="M364.958,26.854C338.788,2.059,292.446,6.28,273.301,41.298l-0.573,1.048l1.133,0.38
		c7.039,2.359,13.652,6.006,19.499,10.713C308.258,26.319,339.498,17.733,364.958,26.854z"></path>
	<polygon style="fill:#30AA44;" points="70.171,308.343 70.236,308.353 70.51,306.373 	"></polygon>
	<path style="fill:#30AA44;" d="M65.358,307.797l0.036,0.001c0.046-1.199,0.039-0.771,0.035-2L65.358,307.797z"></path>
	<path style="fill:#30AA44;" d="M257.57,37.583c-18.719-1.014-36.99,6.017-50.138,19.309c-4.255,4.301-10.397,5.655-15.648,3.45
		c-33.126-13.917-71.044-0.667-88.846,29.613c-2.192,3.728-6.262,5.928-10.579,5.758c-67.159-2.74-108.402,73.149-69.636,127.946
		c4.812,6.801,5.741,15.62,2.422,23.015c-9.863,21.99-5.149,49.436,16.157,66.995c7.35-3.921,12.998-5.415,20.018-5.904
		C51.534,188.125,145.53,90.631,260.186,90.631c21.327,0,40.234,3.213,59.05,8.88C316.558,63.171,288.562,39.272,257.57,37.583z"></path>
</g>
<path style="fill:#239B31;" d="M45.144,245.523c3.319-7.522,2.391-16.493-2.422-23.411C9.774,174.739,34.628,111.881,84.06,95.787
	c-62.171,3.523-98.476,75.372-61.335,127.871c4.812,6.801,5.741,15.62,2.422,23.015c-9.863,21.99-5.149,49.436,16.157,66.995
	c5.329-2.843,9.765-4.405,14.477-5.239C39.244,290.655,36.199,265.807,45.144,245.523z"></path>
<path style="fill:#83CC8E;" d="M420.141,167.512c-18.439-23.992-42.425-43.849-69.363-57.424
	c-28.252-14.237-58.731-21.456-90.593-21.456c-115.299,0-210.783,97.971-200.859,219.272l0.985-0.069
	c27.226-1.905,46.317,24.577,46.506,24.845l0.271,0.384l0.468,0.036c22.852,1.745,40.945,14.742,53.776,38.63
	c9.621,17.909,12.488,35.551,12.516,35.726l0.125,0.791l0.799,0.051c39.326,2.524,68.38,42.221,84.857,78.235
	c14.578-51.198,47.78-94.299,100.106-103.021l0.957-0.16l-0.131-0.962c-0.11-0.811-10.512-81.446,35.459-110.481l0.678-0.428
	l-0.271-0.755c-0.233-0.649-22.747-65.228,21.895-94.185l0.394-0.256l0.055-0.466c0.003-0.03,0.365-3.036,1.542-7.441l0.127-0.476
	L420.141,167.512z"></path>
<path style="fill:#78C181;" d="M278.333,89.429c-5.995-0.528-12.045-0.798-18.147-0.798c-115.298,0-210.782,97.971-200.859,219.272
	l0.985-0.069c7.417-0.519,14.225,1.077,20.217,3.668C73.742,191.969,165.387,95.521,278.333,89.429z"></path>
<path style="fill:#3BBC56;" d="M240.792,449.605c-17.521-24.165-37.76-38.715-58.914-42.462c-3.668-0.65-6.646-3.323-7.552-6.937
	c-8.12-32.413-27.643-62.876-60.9-68.411c-3.312-0.551-6.348-2.198-8.579-4.707c-19.571-22.024-45.838-29.226-71.311-10.86
	c-42.422,30.585-5.96,68.992,33.198,61.114c11.432-2.307,17.978,10.964,27.046,29.323c9.999,20.244,22.441,45.438,47.434,63.889
	c21.678,16.002,48.756,23.925,82.137,23.925c13.809,0,26.831-1.304,40.306-3.341C259.213,479.497,250.571,463.091,240.792,449.605z"></path>
<path style="fill:#30AA44;" d="M243.349,493.478c-33.381,0-60.459-7.923-82.137-23.925c-24.993-18.45-37.436-43.645-47.434-63.889
	c-9.067-18.358-15.614-31.629-27.046-29.323c-39.158,7.878-75.619-30.528-33.198-61.114c5.88-4.239,11.801-7.101,17.674-8.748
	c-12.139-2.192-25.003,0.614-37.671,9.748c-42.422,30.585-5.96,68.992,33.198,61.114c11.432-2.307,17.978,10.964,27.046,29.323
	c9.999,20.244,22.441,45.438,47.434,63.889c21.678,16.002,48.756,23.925,82.137,23.925c7.299,0,14.377-0.372,21.419-1.017
	C244.294,493.465,243.826,493.478,243.349,493.478z"></path>
<path style="fill:#3BBC56;" d="M489.158,283.1c-1.367-34.073-8.594-70.245-14.926-89.836l-0.745,0.017
	c-33.932,0.74-38.067,59.508-38.228,62.026c-2.386,50.709-71.272,123.709-75.764,128.246
	c-54.817,9.406-90.791,56.957-102.634,106.008c7.525,3.899,25.848,9.941,49.073,9.941c1.882,0,3.812-0.039,5.781-0.121
	c30.243-1.261,76.967-13.302,127.82-63.51C479.708,396.211,491.403,339.058,489.158,283.1z"></path>
<g>
	<path style="fill:#30AA44;" d="M293.633,455.488c13.384-30.608,35.313-57.475,64.586-71.685
		c-54.092,9.923-89.607,57.093-101.357,105.759c7.525,3.899,25.848,9.941,49.073,9.941c1.882,0,3.812-0.039,5.781-0.121
		c2.379-0.099,4.87-0.274,7.447-0.52c-0.171-0.017-0.343-0.035-0.513-0.053C297.817,496.608,285.24,474.681,293.633,455.488z"></path>
	<path style="fill:#30AA44;" d="M506.652,153.886c-1.258-14.208-13.292-23.77-33.017-26.236
		c-30.304-3.786-49.616,14.669-55.945,42.932c-0.635,2.837-2.213,5.383-4.52,7.152c-16.385,12.558-24.909,32.085-24.719,56.805
		c0.106,13.8,2.923,25.978,4.689,32.29c0.637,2.275-0.218,4.676-2.111,6.089c-17.253,12.876-28.331,35.189-32.139,64.897
		c-3.078,24.003,0.606,45.738,0.606,45.738l0,0l0,0l0,0l0,0c47.618-17.485,79.233-42.018,94.225-74.234
		c12.733-27.364,11.602-54.628,10.694-76.536c-0.823-19.851-1.418-34.193,9.391-37.547
		C493.729,189.053,508.157,170.89,506.652,153.886z"></path>
</g>
<path style="fill:#239B31;" d="M379.657,337.815c3.809-29.708,14.886-52.021,32.139-64.897c1.893-1.413,2.747-3.814,2.111-6.089
	c-1.768-6.313-4.583-18.491-4.689-32.29c-0.19-24.72,8.336-44.246,24.719-56.805c2.307-1.769,3.884-4.314,4.52-7.151
	c4.996-22.31,18.088-38.497,38.284-42.47c-1.015-0.173-2.048-0.33-3.107-0.462c-30.304-3.786-49.616,14.669-55.945,42.932
	c-0.635,2.837-2.213,5.383-4.52,7.151c-16.385,12.559-24.909,32.085-24.719,56.805c0.106,13.8,2.923,25.977,4.689,32.29
	c0.637,2.274-0.218,4.676-2.111,6.089c-17.253,12.876-28.331,35.19-32.139,64.897c-3.078,24.003,0.606,45.738,0.606,45.738
	c6.933-2.546,13.516-5.246,19.769-8.093C378.455,366.989,377.73,352.848,379.657,337.815z"></path>
<path d="M17.961,244.012C17.961,244.013,17.961,244.013,17.961,244.012c-9.882,22.024-6.39,48.387,10.172,67.2
	C9.418,324.864,2.45,342.615,9.502,358.77c8.207,18.796,33.35,29.756,57.258,24.942c6.195-1.245,11.623,8.998,19.935,25.829
	c17.399,35.23,45.125,91.4,135.694,91.393c11.228-0.001,23.443-0.877,36.703-2.752c8.016,3.057,23.958,7.819,45.499,7.819
	c52.902,0,100.77-28.499,138.253-65.506c20.18-19.923,34.678-45.335,43.09-75.53c1.112-3.989-1.222-8.125-5.211-9.236
	c-3.989-1.114-8.125,1.222-9.236,5.211c-7.702,27.643-20.884,50.818-39.18,68.883c-38.428,37.939-80.373,59.041-121.299,61.025
	c-20.225,0.98-35.704-2.938-44.013-5.775c-0.007-0.008-0.013-0.016-0.019-0.023c-0.236-0.564-0.515-1.218-0.827-1.936
	c6.625-21.516,30.756-82.668,93.257-93.169c0.531-0.078,1.087-0.221,1.611-0.424c133.149-48.586,105.853-139.834,108.444-176.748
	c5.527,23.176,13.76,68.128,8.504,114.338c-0.468,4.115,2.489,7.831,6.603,8.299c4.115,0.467,7.831-2.489,8.299-6.603
	c6.527-57.39-6.298-111.386-11.474-130.037c19.051-8.808,32.055-27.612,30.475-45.457c-2.093-23.649-27.799-33.904-51.032-32.559
	c-2.055-0.985-4.153-1.492-4.379-4.145c-2.1-24.683-17.261-46.653-39.568-57.334c-21.712-10.399-29.332-3.026-32.153-11.174
	c-6.072-17.544-19.418-31.69-36.615-38.81c-3.827-1.583-8.213,0.233-9.798,4.06c-1.584,3.826,0.233,8.213,4.06,9.798
	c13.237,5.48,23.509,16.364,28.18,29.859c2.895,8.36,10.268,14.032,18.786,14.448c7.315,0.358,14.401,2.158,21.062,5.347
	c17.533,8.397,29.452,25.67,31.102,45.079c0.205,2.412,0.864,4.712,1.906,6.803c-12.289,5.194-21.751,15.281-27.882,28.5
	c-24.583-28.14-56.227-49.084-91.761-60.765c-3.605-24.081-18.842-43.951-39.559-54.121c6.921-8.656,16.689-14.879,27.77-17.506
	c4.029-0.956,6.521-4.997,5.566-9.027c-0.956-4.029-4.99-6.521-9.027-5.566c-16.023,3.799-29.933,13.433-38.993,26.787
	c-4.163-1.005-8.463-1.65-12.867-1.89c-20.58-1.128-40.66,6.615-55.111,21.227c-2.379,2.405-5.719,3.202-8.51,2.03
	c-36.094-15.164-77.502-0.799-96.966,32.31c-0.974,1.656-2.771,2.636-4.713,2.559c-4.3-0.174-8.663-0.033-12.967,0.42
	c-65.325,6.872-101.28,82.579-62.235,137.771C19.707,232.42,20.379,238.625,17.961,244.012z M68.073,368.572
	c-1.397,0-2.822,0.146-4.27,0.438c-19.004,3.824-35.845-5.453-40.554-16.241c-7.788-17.835,19.19-38.424,38.521-38.529
	c14.934-0.034,29.205,10.294,37.98,21.525c0.145,0.187,0.269,0.346,0.44,0.577c1.531,2.063,3.458,3.073,5.617,3.238
	c33.056,2.524,52.631,33.599,59.768,65.9c0.173,0.784,0.478,2.24,0.599,2.99c0.547,3.466,3.424,6.09,6.927,6.314
	c35.076,2.249,61.856,37.76,77.027,69.451C93.857,502.514,112.083,368.572,68.073,368.572z M420.604,181.994
	c3.709-2.405,2.969-5.143,4.597-11.472c0-0.001,0.14-0.463,0.14-0.463c6.206-23.246,21.368-37.05,45.983-33.976
	c41.779,5.222,26.284,42.347-1.39,51.069c-46.302,14.594,40.81,125.9-104.985,184.799c-1.148-21.504-0.167-73.417,33.287-94.546
	c2.965-1.873,4.232-5.558,3.059-8.862C401.08,267.942,380.376,208.089,420.604,181.994z M409.944,169.907
	c-0.108,0.5-0.207,0.975-0.292,1.41c-19.173,13.767-29.171,35.565-28.957,63.272c0.109,14.211,2.879,26.608,4.762,33.433
	c-37.781,28.489-36.849,87.925-35.279,108.469c-26.621,6.064-49.8,21.043-68.105,43.902c1.726-17.504,2.119-34.663,1.19-51.413
	c-0.001-0.308-0.022-0.615-0.061-0.919c-0.935-16-3.065-31.628-6.426-46.814c-0.02-0.091-0.043-0.181-0.063-0.271
	c0.251-4.063,1.817-21.958,10.667-43.462c13.327-32.377,36.028-57.241,67.47-73.898c3.659-1.939,5.055-6.478,3.116-10.137
	c-1.938-3.659-6.475-5.054-10.137-3.116c-43.38,22.982-64.492,57.301-74.565,82.046c-2.357,5.788-4.232,11.318-5.729,16.446
	c-0.263-0.75-0.533-1.498-0.803-2.246c-0.031-0.095-0.066-0.189-0.101-0.283c-6.438-17.787-14.663-34.833-24.608-50.992
	c2.356-10.529,13.066-50.173,45.4-77.209c3.178-2.657,3.6-7.386,0.943-10.563c-2.656-3.177-7.386-3.599-10.562-0.943
	c-27.504,22.997-40.821,53.484-46.795,72.133c-30.692-42.781-63.299-63.093-64.758-63.99c-3.526-2.167-8.146-1.063-10.313,2.468
	c-2.167,3.529-1.063,8.147,2.468,10.313c0.232,0.143,15.541,9.679,34.658,29.25c-28.527-3.008-50.561,4.238-51.709,4.626
	c-3.919,1.323-6.02,5.567-4.703,9.489c1.315,3.92,5.559,6.033,9.489,4.725c0.302-0.102,30.045-9.768,63.204-0.543
	c5.068,6.249,10.18,13.119,15.166,20.644c6.416,9.686,12.893,20.914,18.839,33.681c-50.628-23.359-117.7,2.684-120.939,3.97
	c-3.847,1.527-5.727,5.882-4.202,9.731c1.525,3.848,5.881,5.731,9.732,4.21c0.817-0.322,81.191-31.457,125.105,5.863
	c6.413,18.216,11.445,38.857,13.937,61.931c-15.551-8.053-43.351-19.064-75.252-16.196c-4.125,0.371-7.169,4.015-6.798,8.14
	c0.37,4.124,4.035,7.172,8.14,6.797c35.222-3.16,65.789,13.451,75.297,19.283c1.107,23.917-0.539,50.197-6.047,78.846
	c-2.135,4.402-3.96,8.6-5.504,12.468c-13.522-23.961-39.211-58.528-76.995-64.037c-8.633-36.889-31.407-70.776-69.509-75.461
	c-10.913-13.196-26.89-24.121-44.286-25.553C57.162,113.115,293.711,24.043,409.944,169.907z M90.759,104.204
	c7.464,0.314,14.467-3.505,18.251-9.943c15.69-26.691,49.093-38.321,78.227-26.084c8.464,3.556,18.27,1.472,24.98-5.31
	c30.237-30.572,83.14-18.038,95.25,24.925C172.538,55.556,44.287,162.183,51.053,300.429c-3.215,0.715-6.411,1.745-9.585,3.101
	c-14.316-14.341-17.769-35.661-9.824-53.377l0,0c4.543-10.126,3.303-22.16-3.238-31.402
	C-5.823,170.366,29.534,101.711,90.759,104.204z"></path>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
                        <span>{{ guideline.vegetable}}</span>
                    </span>
                </div>
                <div class="flex rounded-lg" :class="guideline.sport >= 30 ? 'bg-primary-content text-neutral':  noCountDay ? 'bg-secondary' : 'bg-primary'" @click="updateGuideline('sport')">
                    <span class="p-2 flex flex-col justify-center items-center text-base">
                        <svg  class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="512" height="512" x="0" y="0" viewBox="0 0 128 128" style="enable-background:new 0 0 512 512" xml:space="preserve"><g><g fill="#e6e7e8"><path d="M70.276 29.319c.528.216 1.358.35 2.334.35 2.145 0 4.991-.651 6.867-2.522 1.177-1.174 1.837-2.909 2.476-4.586.542-1.424 1.054-2.77 1.772-3.465a6.296 6.296 0 0 1 2.934-1.607 11.573 11.573 0 0 0-.149 1.767c0 6.394 5.202 11.595 11.596 11.595s11.595-5.202 11.595-11.595S104.5 7.66 98.106 7.66c-2.388 0-4.608.726-6.455 1.968-2.88-2-7.397-3.365-10.954-1.15-4.151 2.589-5.004 7.519-5.755 11.869l-.193 1.104c-.606 3.375-2.606 4.355-3.93 5.003-.75.368-1.526.749-1.516 1.64.005.311.136.883.973 1.225z" fill="#e6e7e8" opacity="1" data-original="#e6e7e8" class=""/><path d="m117.864 69.53-21.702-6.358-2.06-13.513c2.925-4.751 2.352-11.068-1.752-15.193-4.37-4.393-11.294-4.79-16.139-1.183l-13.286-4.578a5.436 5.436 0 0 0-4.73.566L39.886 41.014c-2.479 1.589-3.249 4.929-1.718 7.443a5.42 5.42 0 0 0 3.437 2.483 5.427 5.427 0 0 0 4.181-.722l16.103-10.313 5.45 1.878-9.269 9.06c-3.135 3.065-4.643 7.168-4.542 11.242L41.574 73.952l-22.457-5.905c-3.691-1.077-7.555 1.046-8.631 4.729s1.045 7.554 4.745 8.635l26.578 7.222a6.692 6.692 0 0 0 6.446-1.703l12.099-12.011 14.174 14.539v28.188c0 3.867 3.146 7.014 7.014 7.014s7.014-3.146 7.014-7.014V87.074a7.499 7.499 0 0 0-1.975-5.079L74.922 69.26l9.649-9.61 1.324 8.682a5.482 5.482 0 0 0 3.876 4.424L114.8 80.03a5.429 5.429 0 0 0 4.186-.473 5.427 5.427 0 0 0 2.607-3.307c.802-2.869-.872-5.884-3.729-6.72zM13.249 45.873h17.729a1 1 0 1 0 0-2H13.249a1 1 0 1 0 0 2zM13.677 30.965h31.41a1 1 0 1 0 0-2h-31.41a1 1 0 1 0 0 2z" fill="#e6e7e8" opacity="1" data-original="#e6e7e8" class=""/><path d="M13.249 60.782h28.15a1 1 0 1 0 0-2h-28.15a1 1 0 1 0 0 2z" fill="#e6e7e8" opacity="1" data-original="#e6e7e8"/></g><g fill="#fa759e"><path d="M87.647 6.87c-2.423-1.911-6.928-3.72-10.42-1.543-4.113 2.565-4.705 7.913-5.493 12.301-.988 5.499-5.441 5.576-5.43 6.455.009.751 5.558 1.257 8.467-1.644 2.005-2 2.461-6.32 4.259-8.062 1.54-1.492 3.355-1.979 4.91-2.087a10.589 10.589 0 0 1 3.707-5.42zM54.526 67.611a14.118 14.118 0 0 1-3.994-9.114l-12.66 12.567-23.037-6.058a5.958 5.958 0 1 0-3.342 11.439l26.577 7.221a5.67 5.67 0 0 0 5.48-1.447l12.815-12.722zM113.583 66.489l-22.314-6.537-2.209-14.494a11.35 11.35 0 0 1-1.455 1.773l-6.343 6.318 1.62 10.632a4.464 4.464 0 0 0 3.167 3.614l25.03 7.273a4.469 4.469 0 0 0 2.504-8.579z" fill="#9ec151" opacity="1" data-original="#fa759e" class=""/><circle cx="94.106" cy="15.255" r="10.595" fill="#9ec151" opacity="1" data-original="#fa759e" class=""/></g><path fill="#ffffff" d="M94.106 7.66c5.341 0 9.746 3.956 10.477 9.095.07-.491.118-.989.118-1.5 0-5.851-4.744-10.595-10.595-10.595S83.511 9.404 83.511 15.255c0 .511.048 1.009.118 1.5.731-5.139 5.136-9.095 10.477-9.095z" opacity="1" data-original="#ffffff" class=""/><path fill="#9ec151" d="M87.641 31.171c-4.161-4.182-10.773-4.445-15.25-.769L58.599 25.65a4.464 4.464 0 0 0-3.864.463L36.427 37.856a4.467 4.467 0 0 0 4.82 7.521l16.51-10.573 7.439 2.563-10.428 10.192c-5.599 5.473-5.707 14.446-.242 20.052l17.003 17.441v28.595a6.014 6.014 0 1 0 12.028 0V83.074c0-1.63-.611-3.201-1.712-4.404L69.536 65.229l18.068-17.997c4.444-4.426 4.461-11.615.037-16.061z" opacity="1" data-original="#fa759e" class=""/><g fill="#3a2c60"><path d="M66.276 25.319c.528.216 1.359.35 2.334.35 2.145 0 4.991-.651 6.867-2.522 1.178-1.174 1.838-2.909 2.477-4.586.542-1.424 1.054-2.769 1.772-3.465a6.288 6.288 0 0 1 2.935-1.606 11.546 11.546 0 0 0-.149 1.765c0 6.394 5.201 11.595 11.595 11.595S105.7 21.649 105.7 15.255 100.499 3.66 94.106 3.66c-2.387 0-4.608.726-6.454 1.968-2.881-2.001-7.399-3.366-10.954-1.15-4.152 2.589-5.003 7.519-5.755 11.868l-.193 1.104c-.606 3.375-2.606 4.355-3.93 5.003-.75.368-1.526.748-1.516 1.64.004.312.135.884.972 1.226zM103.7 15.255c0 5.291-4.304 9.595-9.595 9.595s-9.595-4.304-9.595-9.595 4.304-9.595 9.595-9.595 9.595 4.305 9.595 9.595zm-30.982 2.55.195-1.118c.68-3.936 1.451-8.396 4.843-10.511.95-.592 2.014-.837 3.096-.837 1.833 0 3.706.708 5.172 1.619a11.615 11.615 0 0 0-2.831 4.417c-1.574.211-3.335.808-4.86 2.285-1.038 1.005-1.626 2.552-2.25 4.19-.563 1.48-1.146 3.011-2.019 3.882-1.43 1.426-3.664 1.887-5.257 1.933 1.445-.865 3.302-2.468 3.911-5.86z" fill="#3a2c60" opacity="1" data-original="#3a2c60" class=""/><path d="m113.864 65.529-21.703-6.358-2.059-13.513c2.925-4.752 2.352-11.068-1.752-15.192-4.37-4.393-11.292-4.789-16.135-1.182l-13.29-4.58a5.441 5.441 0 0 0-4.73.566L35.887 37.014c-2.478 1.589-3.249 4.929-1.718 7.443a5.422 5.422 0 0 0 3.438 2.483 5.424 5.424 0 0 0 4.179-.722l16.103-10.313 5.45 1.878-9.269 9.06c-3.135 3.065-4.642 7.168-4.542 11.242L37.574 69.952l-22.458-5.905c-3.685-1.075-7.555 1.046-8.631 4.729s1.045 7.554 4.747 8.635l26.577 7.222a6.69 6.69 0 0 0 6.446-1.703l12.099-12.011 14.174 14.539v6.036a1 1 0 0 0 2 0v-6.442a1 1 0 0 0-.284-.698l-17.002-17.44c-5.07-5.2-4.969-13.562.225-18.638l9.987-9.762 6.704 2.31a1 1 0 1 0 .651-1.891l-14.728-5.075a1.001 1.001 0 0 0-.865.103L40.708 44.534a3.435 3.435 0 0 1-2.65.458 3.437 3.437 0 0 1-2.18-1.575 3.486 3.486 0 0 1 1.09-4.72l18.308-11.743a3.445 3.445 0 0 1 2.999-.359l20.238 6.974a1 1 0 0 0 .651-1.891l-4.535-1.563c3.941-2.148 8.994-1.566 12.304 1.761 4.027 4.046 4.012 10.617-.033 14.646L68.831 64.52a1 1 0 0 0-.032 1.384l12.308 13.441a5.507 5.507 0 0 1 1.449 3.729v30.573c0 2.765-2.249 5.014-5.014 5.014s-5.014-2.249-5.014-5.014v-7.32a1 1 0 0 0-2 0v7.32c0 3.867 3.146 7.014 7.014 7.014s7.014-3.146 7.014-7.014V83.074a7.503 7.503 0 0 0-1.974-5.079L70.922 65.26l9.649-9.61 1.323 8.683a5.483 5.483 0 0 0 3.877 4.423l25.03 7.273a5.422 5.422 0 0 0 4.185-.473 5.429 5.429 0 0 0 2.608-3.307c.8-2.868-.873-5.883-3.73-6.72zm-60.054 2.78 1.148 1.178L42.846 81.51a4.688 4.688 0 0 1-4.513 1.192l-26.559-7.217a4.963 4.963 0 0 1-3.369-6.149c.767-2.625 3.523-4.138 6.176-3.362l23.037 6.058c.341.09.707-.008.959-.258l11.22-11.138a15.091 15.091 0 0 0 4.013 7.673zm61.858 3.402a3.446 3.446 0 0 1-1.654 2.098 3.438 3.438 0 0 1-2.655.3L86.33 66.836a3.476 3.476 0 0 1-2.458-2.804l-1.544-10.131 5.984-5.96c.035-.035.064-.074.099-.109l1.87 12.272a1 1 0 0 0 .708.809l22.314 6.537a3.48 3.48 0 0 1 2.365 4.261z" fill="#3a2c60" opacity="1" data-original="#3a2c60" class=""/><path d="M71.529 103.327a1 1 0 0 0 1-1v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 1 1zM9.249 41.873h17.729a1 1 0 0 0 0-2H9.249a1 1 0 0 0 0 2zM9.676 26.965h31.41a1 1 0 0 0 0-2H9.676a1 1 0 0 0 0 2zM9.249 56.782h28.149a1 1 0 0 0 0-2H9.249a1 1 0 0 0 0 2z" fill="#3a2c60" opacity="1" data-original="#3a2c60" class=""/></g></g></svg>
                        <span>{{guideline.sport}}</span>
                    </span>
                </div>
            </div>
        <Link :href="route('food.no-count')" class="border p-2 rounded-lg"> Listado de alimentos </Link>
        </div>
        <div>
            <div class="collapse collapse-arrow bg-base-200" v-for="time in times" :key="time">
                <input type="checkbox" class="peer w-full" />
                <div class="collapse-title bg-primary-content text-primary peer-checked:bg-primary-content peer-checked:text-primary flex justify-between items-center">
                    {{ time }}
                    <Link :href="ziggyRoute('points.show', {time, dayActive, noCountDay})" class="text-primary-content bg-primary rounded-full h-3 w-3 flex items-center justify-center p-3 z-10">+</Link>
                </div>
                <div class="collapse-content bg-primary-content text-primary peer-checked:bg-primary-content peer-checked:text-primary">
                    <ul class="ml-4 text-neutral">
                        <li class="border-b py-2" v-for="meal in meals[time]" :key="meal.id">
                            <div class="flex items-center">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mr-2" :class="{
                                    'bg-blue-500': meal.color === 'blue',
                                    'bg-green-500': meal.color === 'green',
                                    'bg-yellow-500': meal.color === 'yellow',
                                    'bg-red-500': meal.color === 'red',
                                }"></div>
                                <div class="flex justify-between w-full items-center">
                                    <div>
                                        <div class="text-sm">{{meal.name}}</div>
                                        <div class="text-xs" v-if="meal.quantity">{{  meal.quantity }}</div>
                                    </div>
                                    <div class="flex ">
                                        <div class="text-sm mr-2">{{meal.points}} puntos</div>
                                        <button @click="deleteMeal(meal)" class="btn btn-xs btn-error btn-outline">Borrar</button>
                                    </div>

                                </div>

                            </div>
                        </li>
                    </ul>
                    <div class="text-neutral text-right py-2">Total: <span class="font-bold">{{totalPointsPerMeal[time]}} puntos</span> </div>
                </div>
            </div>

        </div>
    </div>

</template>
